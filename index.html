<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Tiziana ❤️</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- [ESTILOS GENERALES] --- */
        body {
            background: linear-gradient(135deg, #ffe0e6 0%, #fff0f5 100%);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            position: relative;
            transition: background 2s ease-in-out;
        }

        /* --- [SECCIONES] --- */
        .seccion-carta {
            display: none;
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            flex-direction: column;
            align-items: center;
            z-index: 10;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-top: 20px;
            padding-bottom: 80px;
            transition: opacity 1.5s ease;
        }

        .card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            padding: 25px 20px;
            box-shadow: 0 20px 50px rgba(255, 51, 102, 0.2);
            text-align: center;
            border: 2px solid #ffccd5;
            animation: subirFade 0.8s ease-out forwards;
            max-width: 380px;
            width: 88%;
            margin: 10px auto 30px auto;
            position: relative;
        }

        /* --- [TIPOGRAFÍA] --- */
        h1 { color: #d81b60; font-family: 'Dancing Script', cursive; font-size: 2.2rem; margin: 0; line-height: 1.2; }
        h2 { color: #ad1457; font-size: 1.5rem; margin: 10px 0; font-family: 'Dancing Script', cursive; }
        p { color: #4a0016; font-size: 0.9rem; line-height: 1.6; margin-bottom: 12px; text-align: left; }

        .divider { display: flex; align-items: center; justify-content: center; margin: 15px 0; width: 100%; }
        .divider div { height: 1px; background: #ffccd5; flex-grow: 1; }
        .divider span { margin: 0 10px; color: #ff3366; font-size: 1.2rem; }

        button {
            background: linear-gradient(45deg, #ff3366, #ff6b8f);
            color: white; border: none; padding: 12px 25px;
            border-radius: 50px; font-size: 0.9rem; font-weight: 600;
            cursor: pointer; box-shadow: 0 5px 15px rgba(255, 51, 102, 0.3);
            text-transform: uppercase; margin-top: 20px; width: 100%;
            transition: transform 0.2s;
        }
        button:active { transform: scale(0.95); }

        /* --- [ELEMENTOS VISUALES] --- */
        .grid-cualidades { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .cualidad-box { background: #fff0f5; border: 1px solid #ff80ab; color: #c2185b; padding: 8px 15px; border-radius: 12px; font-size: 0.85rem; font-weight: 700; font-family: 'Poppins', sans-serif; }
        .marco-foto { width: 100%; height: auto; border-radius: 15px; border: 4px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.15); margin: 15px 0; display: block; background-color: #eee; }

        /* --- [HISTORIA] --- */
        .item-historia { position: relative; padding-left: 15px; border-left: 2px solid #ffccd5; margin-bottom: 25px; }
        .punto-historia { position: absolute; left: -6px; top: 0; width: 10px; height: 10px; background: #fff; border: 2px solid #ff3366; border-radius: 50%; }
        .titulo-historia { color: #d81b60; font-weight: 700; display: block; margin-bottom: 5px; }

        /* --- [CAJA DE REGALO] --- */
        #pantalla-inicio { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #ffe0e6; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 2000; }
        .box-container { position: relative; width: 100px; height: 100px; cursor: pointer; }
        .box-body { position: absolute; bottom: 0; width: 100%; height: 80%; background-color: #ff3366; border-radius: 0 0 10px 10px; }
        .box-lid { position: absolute; top: 0; width: 110%; height: 25%; background-color: #e60039; left: -5%; border-radius: 5px; z-index: 2; transition: 0.5s; }
        .box-bow { position: absolute; top: -20%; left: 50%; transform: translateX(-50%); width: 40px; height: 20px; background-color: #fff; border-radius: 20px; z-index: 3; }
        .box-bow::before { content: ''; position: absolute; left: 50%; transform: translateX(-50%); width: 10px; height: 120px; background-color: #fff; top: 0; z-index: 1; }
        .sacudir { animation: shakeBox 0.4s ease-in-out; }
        .box-open .box-lid, .box-open .box-bow { transform: translateY(-100px) rotate(10deg); opacity: 0; transition: 0.5s; }
        @keyframes shakeBox { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(8deg); } 50% { transform: rotate(-8deg); } 75% { transform: rotate(8deg); } }

        /* --- [FOTO POLAROID] --- */
        .foto-externa { background: white; padding: 12px 12px 40px 12px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); transform: rotate(-3deg); width: 250px; max-width: 80vw; margin: 10px auto; position: relative; z-index: 20; border: 1px solid #eee; animation: caerFoto 1s ease-out forwards; }
        .foto-externa img { width: 100%; height: auto; display: block; }
        .nota { position: absolute; padding: 4px 8px; font-family: 'Dancing Script', cursive; font-size: 1rem; color: #444; background: #fff; box-shadow: 1px 1px 3px rgba(0,0,0,0.2); }
        .nota-1 { top: -8px; left: -8px; transform: rotate(-8deg); border: 1px solid #ff3366; }
        .nota-2 { bottom: 10px; right: -10px; transform: rotate(4deg); background: #fff9c4; border: 1px solid #fbc02d; }

        /* --- [EFECTOS Y ANIMACIONES] --- */
        @keyframes subirFade { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes caerFoto { from { opacity: 0; transform: translateY(-50px) rotate(5deg); } to { opacity: 1; transform: translateY(0) rotate(-3deg); } }
        @keyframes floatHigh { 0% { transform: translateY(100vh) scale(0.5); opacity: 0; } 20% { opacity: 1; } 100% { transform: translateY(-20vh) scale(1.2) rotate(360deg); opacity: 0; } }
        
        .heart, .petal { position: absolute; opacity: 0; pointer-events: none; z-index: 5; }
        .heart { background: #ff0040; width: 16px; height: 16px; transform: rotate(45deg); }
        .heart:before, .heart:after { content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%; background: #ff0040; }
        .heart:before { top: -50%; left: 0; }
        .heart:after { left: 50%; top: 0; }
        .petal { background: rgba(255, 255, 255, 0.95); width: 18px; height: 18px; border-radius: 150% 0 150% 0; border: 1px solid #fff0f5; transform: rotate(-30deg); }

        /* --- [ESTILOS NUEVOS: CIELO VISUALMENTE MEJORADO] --- */
        #paso7 {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow: hidden;
            z-index: 100;
            /* Fondo profundo tipo galaxia */
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
        }

        /* Capa de nebulosa suave */
        .nebulosa {
            position: absolute;
            width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(255, 0, 150, 0.15), transparent 60%);
            animation: pulsarNebulosa 8s infinite alternate;
            z-index: 1;
            pointer-events: none;
        }

        .nombre-final {
            font-family: 'Dancing Script', cursive;
            font-size: 4.5rem;
            color: #fff;
            /* Resplandor más celestial */
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.9), 0 0 40px rgba(255, 105, 180, 0.8), 0 0 70px rgba(255, 105, 180, 0.6);
            animation: flotarNombre 5s ease-in-out infinite;
            z-index: 50;
            position: relative;
        }

        @keyframes flotarNombre {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.95; }
            50% { transform: translateY(-15px) scale(1.05); opacity: 1; }
        }
        @keyframes pulsarNebulosa {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 0.8; transform: scale(1.1); }
        }

        .estrella { position: absolute; background: white; border-radius: 50%; animation: parpadeo linear infinite; }
        .estrella-viajera { position: absolute; background: linear-gradient(to top, rgba(255,255,255,0), rgba(255,255,255,0.8)); width: 1px; height: 100px; animation: lluviaEstelar linear infinite; }
        .estrella-fugaz {
            position: absolute; top: 50%; left: 50%; width: 4px; height: 4px; background: #fff; border-radius: 50%;
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1), 0 0 0 8px rgba(255, 255, 255, 0.1), 0 0 20px rgba(255, 255, 255, 1);
            animation: fugaz 3s linear infinite; opacity: 0; z-index: 2;
        }
        .estrella-fugaz::before { content: ''; position: absolute; top: 50%; transform: translateY(-50%); width: 300px; height: 1px; background: linear-gradient(90deg, #fff, transparent); }

        @keyframes parpadeo { 0%, 100% { opacity: 0.2; transform: scale(0.5); } 50% { opacity: 1; transform: scale(1); box-shadow: 0 0 4px #fff; } }
        @keyframes lluviaEstelar { 0% { transform: translateY(0); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: translateY(-120vh); opacity: 0; } }
        @keyframes fugaz { 0% { transform: rotate(315deg) translateX(0); opacity: 1; } 70% { opacity: 1; } 100% { transform: rotate(315deg) translateX(-1000px); opacity: 0; } }
    </style>
</head>
<body>

    <audio id="musica-fondo" loop>
        <source src="audio.mp3" type="audio/mpeg">
    </audio>

    <div id="pantalla-inicio">
        <div class="box-container" onclick="abrirRegalo()">
            <div class="box-lid"></div>
            <div class="box-bow"></div>
            <div class="box-body"></div>
        </div>
        <p style="color: #ff3366; margin-top: 35px; font-weight: 700; font-size: 1.4rem; font-family: 'Dancing Script', cursive;">Para Tiziana...</p>
    </div>

    <div class="seccion-carta" id="paso1">
        <div class="card">
            <h1>HOLAAA, TIZIANA.</h1>
            <p style="text-align: center;">Buenos días, tardes o noches </p>
            <div class="divider"><div></div><span>❤️</span><div></div></div>
            <p>Hoy es un día especial, y lo sabes.</p>
            <p>Hemos pasado buenos momentos juntos, y este es un presente en este día, que expresa mi gratitud y mis sentimientos por ti.</p>
            <button id="btn-revelar" onclick="revelarMensaje()">VER (con confianza xd)</button>
            <div id="mensaje-secreto" style="display:none; margin: 20px 0; font-style: italic; color: #c2185b; border-left: 4px solid #ff3366; background: #fffafb; padding: 15px; border-radius: 10px; font-family: 'Dancing Script', cursive; font-size: 1.2rem;">
                "Eres esa luz que no buscaba, pero que ahora no quiero perder por nada del mundo."
            </div>
            <div id="texto-final" style="display:none; margin-top: 15px;">
                <p>¿Te acuerdas de las flores que te pregunté?</p>
                <button onclick="cambiarPaso(1, 2)">Ven, acompáñame </button>
            </div>
        </div>
    </div>

    <div class="seccion-carta" id="paso2">
        <div class="foto-externa">
            <div class="nota nota-1">Gardenia</div>
            <img src="gardenia.jpg" alt="Gardenia Blanca">
            <div class="nota nota-2">Para Tiziana</div>
        </div>
        <div class="card">
            <h2>Una flor blanca, como tu luz.</h2>
            <p>Tiziana, quiero dedicarte esto, aunque no creo poder darte unas flores; de verdad me hubiera encantado.</p>
            <p>Y el no poder hacerlo me hace sentir mal, puesto que tú te mereces lo mejor de lo mejor. En sí no es la flor como tal, sino el blanco. Por alguna extraña razón, el blanco me recuerda a ti.</p>
            <p>Cada vez que vea una flor blanca, siempre estarás ahí. Quizá por la pureza que vi en ti, por tu amabilidad y tu forma de ser, por tu luz. Me salvaste cuando naufragaba sin rumbo. En medio de la oscuridad apareciste tú en mi vida, tan brillante y radiante que solo podía seguirte, solo podía mirarte, solo podía sentirte a ti. Y poco a poco recuperé aquello que perdí: las ganas de vivir.</p>
            <p>Eres fuerte y madura. Quizá no siempre es lo que aparentas, pero me enseñaste cosas de ti, cosas que me hicieron quererte mucho más.</p>
            <p>Es verdad que no pareces ser mucho de palabras o de expresar sentimientos, pero de lo que estoy seguro es de que sí sientes, y del mismo modo todos necesitamos cariño y amor en nuestras vidas. Te admiro, te quiero, te adoro.</p>
            <p>Tu belleza es más de lo que unos simples ojos pueden apreciar. La gardenia es una flor que necesita mucho cuidado, y quizá no sea la que más te represente, pero es una flor que no se ve en todos lados. Es especial: una flor que no florece para cualquiera, y cuando lo hace… se nota.</p>
            <button onclick="cambiarPaso(2, 3)">¿SEGUIMOS??</button>
        </div>
    </div>

    <div class="seccion-carta" id="paso3">
        <div class="card">
            <h1>La historia</h1>
            <div class="divider"><div></div></div>
            <div class="item-historia">
                <div class="punto-historia"></div>
                <span class="titulo-historia">EL INICIO</span>
                <p>Aún recuerdo dónde todo comenzó tan claramente. En ese entonces no tenía ni idea de lo que vendría.</p>
                <p>Ese día, esa tarde, siempre la recordaré. Te dije que no sé exactamente cuándo comenzó todo, pero quizá fue en ese preciso instante en el que te vi una tarde en el retiro, justo al atardecer, cuando las nubes empezaban a cubrir el cielo. La brisa del viento soplaba con fuerza, mientras las hojas de los árboles chocaban entre sí. Hubo un momento en el que te vi, y en ese instante fue como si el resto hubiera desaparecido, como si tú fueras todo lo que existe en este mundo.</p>
                <p>Después de eso, cuando regresamos en Navidad, sí te vi cuando nadie más había llegado, pero ya no podía mirarte y me sentía nervioso. Fingí no verte y seguí. No sabía por qué había hecho eso, ni por qué me sentía así.</p>
                <p>Conforme los días avanzaron, fue peor. El día del aniversario seguía evitándote. En ese entonces estaba en duda: ¿por qué me siento así?, ¿qué me pasa? Hasta que un día, cuando estábamos sentados esperando afuera con Luis, y tú estabas cerca de mí, sentí cómo mi pecho empezó a latir desenfrenadamente. Las ganas de querer verte me invadieron y, por un instante, volteé a verte. Y lo que vi fue más que aquella vez: vi lo más hermoso del universo. Ante mí, la respuesta a todo. Y por ese preciso instante, todo a mi alrededor desapareció. En ese momento descubrí la verdad.</p>
            </div>
            <div class="item-historia">
                <div class="punto-historia"></div>
                <span class="titulo-historia">MOMENTOS ESPECIALES</span>
                <p>Bueno, si de por sí en un minuto pueden pasar muchas cosas, en un año… puff, ni hablemos. Cada ensayo, cada actividad, ir a la parroquia se sintió más como una necesidad por ti. Sé que está mal, deberíamos ir por nuestra fe y devoción, pero en esos momentos solo pensaba en ti.</p>
                <p>Cuando hablamos por primera vez de forma medio fluida después de un ensayo, un sábado en Semana Santa, aunque no estabas siempre presente, las veces que venías lo hacían valer todo. O cuando te hablé por primera vez por WhatsApp xd… quería hacerlo desde antes, pero nunca había encontrado una excusa perfecta. De verdad quería oírte cantar, solo a ti, y hasta ahora jsjs.</p>
                <p>A veces, con miedo de fallar, tú siempre sacabas lo mejor de mí, en serio. Aunque no lo sabías, el hecho de estar siempre pensando en ti, en cada momento de mi vida, era como si siempre estuvieras ahí, aunque no fuera así. Para los trabajos del instituto, para mí mismo, para lo que era y lo que quería hacer, cambié mi forma de vivir. Aunque a veces tenía flojera, lo hacía; aunque todo parecía sin salvación, lo hacía. Y bueno, casi todo terminaba bien.</p>
                <p>Puedo decir que me hiciste una mejor persona, pero sigo cometiendo errores. Soy torpe, despistado… e incluso ahora, mientras escribo esto… es curioso, ¿no? Este mensaje es como si viajara por el tiempo: no lo sabrás hasta que lo leas, en ese día que se convertirá en este día.</p>
                <p>Pentecostés… la verdad no quería ir, estaba medio malito y tenía trabajos, y aun así una palabra tuya fue suficiente para cambiar mi decisión. Ese día me quedé hasta la noche haciendo mi trabajo… pero lo hice, lo logré. Pude ver que era capaz gracias a ti.</p>
                <p>Ojalá hubiéramos vivido el Corpus Christi, lo de las alfombras, pero no fue así. El día que vimos la película fue la primera vez que nos vimos después de que me confesara… y aún no sé si fue la mejor manera, tal vez solo fui un cobarde. Aun así fue divertido hablar contigo, aunque igual estaba preocupado por la película.</p>
                <p>La actuación… de verdad me puse re nervioso, no sabía ni cómo actuar, pero fue bonito y, de cierta manera, es lo más cercano que te vi a ti enojada.</p>
                <p>Octubre sí fue especial… no solo fue el mes en que se cumplió un año desde que entramos al coro, sino que también era tu cumpleaños y, pues, salió mal xd. Y más aún mis palabras, y más aún mi comportamiento, y más aún que creo que ahí ya sospecharon… todo mal. Me siento responsable.</p>
                <p>Noviembre estuvo más tranquilo. Diciembre… bueno, esa vez y las otras veces que hablamos, sí me pareció curioso que nos parezcamos en varias cosas.</p>
                <p>Bueno, ya está siendo muy largo esto…</p>
            </div>
            <button onclick="cambiarPaso(3, 4)">Lo que veo en ti </button>
        </div>
    </div>

    <div class="seccion-carta" id="paso4">
        <div class="card">
            <h1>Lo que veo en ti</h1>
            <div class="divider"><div></div></div>
            <div class="grid-cualidades">
                <div class="cualidad-box">Fortaleza</div>
                <div class="cualidad-box">Constancia</div>
                <div class="cualidad-box">Sencillez</div>
                <div class="cualidad-box">Dedicación</div>
                <div class="cualidad-box">Genuinidad</div>
                <div class="cualidad-box">Firmeza</div>
            </div>
            <p>Admiro tu <strong>fortaleza</strong>, esa que no hace ruido pero se nota en todo lo que haces. En cómo sigues adelante aun cuando puede que estés cansada o con flojera, en cómo asumes responsabilidades que no todos tendrían la valentía y fortaleza de cargar.</p>
            <p>Admiro tu <strong>constancia</strong>, porque no abandonas lo que es importante para ti. Estudias, trabajas, ayudas en casa y en la feria, no por obligación(o si??jsjs), sino porque entiendes el valor del esfuerzo y del compromiso diario, incluso cuando eso significa sacrificar tiempo para ti.</p>
            <p>Tu <strong>sencillez</strong> es algo que te hace especial. No buscas destacar ni llamar la atención, no necesitas aparentar nada. Eres auténtica en lo que eres y en cómo vives, y eso te da una belleza honesta, tranquila y real.</p>
            <p>Tu <strong>dedicación</strong> se ve en cada cosa que haces con empeño, en tus ganas de salir adelante, en tus sueños por aprender, por estudiar, por dominar aquello que te apasiona, incluso cuando dudas y quizás cuando sientas miedo al futuro.</p>
            <p>Tu <strong>genuinidad</strong> es quizás lo que más te distingue. No finges, no te fuerzas a encajar. Eres tú, con tus silencios, con tu lado reservado, con ese humor que aparece cuando hay confianza, y con esa forma tan tuya de sentir y vivir las cosas.</p>
            <p>Y finalmente, tu <strong>firmeza</strong>: esa capacidad de mantenerte fiel a ti misma, de no dejarte arrastrar por lo superficial, de sostener tus valores aun cuando otros miran, juzgan o esperan demasiado de ti.</p>
            <button onclick="cambiarPaso(4, 5)">Mi deseo para ti </button>
        </div>
    </div>

    <div class="seccion-carta" id="paso5">
        <div class="card">
            <h1>Mi deseo para ti</h1>
            <div class="divider"><div></div></div>
            <p>Mi deseo para ti Tiziana es que el camino que hoy recorres no pese en tus pasos, que no camines cargando miradas ajenas ni expectativas que no te pertenecen, sino que avances a tu propio ritmo, con la calma de quien sabe de lo que es capaz(Aunque eso ya lo sabes.. verdad?.</p>
            <p>Que nunca te falten las cosas que te dan vida: la música que te acompaña, el arte que te expresa, los pequeños momentos que hacen hermoso lo cotidiano y el abrigo de quienes te quieren. Que cada obstáculo sea una lección y no una herida, una prueba que te recuerde tu fuerza y no un motivo para detenerte.</p>
            <img src="imagen .jpg" alt="Imagen Especial" class="marco-foto">
            <p>La vida no promete ausencia de tristeza, pero sí la posibilidad de aprender a seguir. Y yo sé que tú sabes hacerlo. Tienes sueños guardados, metas esperando, y unas alas que recién empiezan a abrirse.</p>
            <p style="color: #d81b60; font-weight: 600;">Lo más bonito aún no llega.<br>Todavía tienes tanto por vivir.</p>
            <button onclick="cambiarPaso(5, 6)">Y finalmente... </button>
        </div>
    </div>

    <div class="seccion-carta" id="paso6">
        <div class="card">
            <h1>Te quiero mucho</h1>
            <p>Tiziana, en verdad te quiero mucho y te digo todo esto solo con la necesidad de que sepas lo importante que eres para mí. Gracias por existir en mi camino, por lo que eres y por todo lo que, sin darte cuenta, dejas en mí. Por todos esos momentos que me diste.</p>
            <img src="imagen2.jpg" alt="Recuerdo Especial" class="marco-foto">
            <p>Tal vez nuestros caminos no caminen juntos de la forma que uno imagina, pero aun así me quedo con lo bonito, con lo real y con lo que vale la pena sentir. Ojalá la vida te regale todo lo que mereces, incluso en los días en que no lo notes.</p>
            <p>Y si tuviera la oportunidad de vivir todo de nuevo, lo aceptaría sin dudarlo, porque conocerte fue lo más hermoso e inesperado que me pudo pasar.</p>
            <p>Amar es algo hermoso, y tú, sin proponértelo, llenaste de luz muchos de mis días. Incluso en los momentos difíciles, incluso cuando no todo fue risa, quedarte en mi vida, aunque sea de esta forma, ya es suficiente para mí.</p>
            <p>Si alguna vez dudas de ti, recuerda que hubo alguien que te miró con admiración, con ternura y con un cariño sincero. Alguien que vio en ti algo especial, algo que no se encuentra fácilmente, y que agradece haber coincidido contigo en este tiempo de la vida.</p>
            <p style="margin-top: 15px;">Cuídate mucho.</p>
            <p>Yo me quedo con tu recuerdo, con tu luz y con lo que hiciste florecer en mí.</p>
            <p style="font-style: italic; color: #ad1457;">Cuando mire al cielo, a las estrellas se que siempre te recordare, cuando la luna me bañe en su luz durante la noche y el sol durante el dia, cuando las galaxias se enciendan, a traves el firmamento.</p>
            <button onclick="irAlCieloFinal()">Mira las estrellas... </button>
        </div>
    </div>

    <div class="seccion-carta" id="paso7">
        <div class="nebulosa"></div>
        <div class="nombre-final">Tiziana</div>
    </div>

    <script>
        let clicsRegalo = 0;
        let heartsActive = false;
        let heartInterval; // Variable para controlar los corazones

        function crearElemento(clase) {
            const el = document.createElement('div');
            el.className = clase;
            document.body.appendChild(el);
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animation = `floatHigh ${Math.random() * 3 + 4}s linear forwards`;
            setTimeout(() => el.remove(), 5000);
        }

        function abrirRegalo() {
            const box = document.querySelector('.box-container');
            clicsRegalo++;
            box.classList.remove('sacudir');
            void box.offsetWidth; box.classList.add('sacudir');
            
            if (clicsRegalo >= 3) {
                box.classList.add('box-open');
                
                // REPRODUCIR AUDIO
                const audio = document.getElementById('musica-fondo');
                audio.play().catch(e => console.log("Audio requiere interacción previa"));

                setTimeout(() => {
                    document.getElementById('pantalla-inicio').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('pantalla-inicio').style.display = 'none';
                        document.getElementById('paso1').style.display = 'flex';
                        iniciarEfectos();
                    }, 800);
                }, 600);
            }
        }

        function iniciarEfectos() {
            if(heartsActive) return;
            heartsActive = true;
            // Guardamos el intervalo para poder detenerlo despues
            heartInterval = setInterval(() => {
                crearElemento('heart');
                setTimeout(() => crearElemento('petal'), 300);
            }, 600);
        }

        function revelarMensaje() {
            document.getElementById('mensaje-secreto').style.display = 'block';
            document.getElementById('texto-final').style.display = 'block';
            document.getElementById('btn-revelar').style.display = 'none';
        }

        function cambiarPaso(act, sig) {
            const current = document.getElementById(`paso${act}`);
            current.style.opacity = '0';
            current.style.transition = 'opacity 0.5s';
            setTimeout(() => {
                current.style.display = 'none';
                const next = document.getElementById(`paso${sig}`);
                next.style.display = 'flex';
                next.scrollTop = 0;
            }, 500);
        }

        function irAlCieloFinal() {
            const current = document.getElementById('paso6');
            current.style.opacity = '0';
            current.style.transition = 'opacity 2s'; // Transición más lenta
            
            // DETENER CORAZONES Y BORRARLOS
            clearInterval(heartInterval);
            const corazones = document.querySelectorAll('.heart, .petal');
            corazones.forEach(el => el.remove());
            
            // Cambiar fondo del body a noche profunda
            document.body.style.background = '#090a0f';
            
            setTimeout(() => {
                current.style.display = 'none';
                const next = document.getElementById('paso7');
                next.style.display = 'flex';
                // Hacer visible suavemente
                next.style.opacity = '0';
                setTimeout(() => next.style.opacity = '1', 50);
                next.style.transition = 'opacity 2s';
                
                crearCieloAnimado();
            }, 1800);
        }

        function crearCieloAnimado() {
            const container = document.getElementById('paso7');
            
            // 1. Estrellas estáticas (diferentes tamaños y brillos)
            for (let i = 0; i < 80; i++) {
                let star = document.createElement('div');
                star.className = 'estrella';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                
                // Variar tamaño
                const size = Math.random() * 2 + 1;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                
                // Variar animación
                star.style.animationDuration = (Math.random() * 2 + 1) + 's';
                star.style.animationDelay = Math.random() * 2 + 's';
                
                container.appendChild(star);
            }

            // 2. Estrellas viajeras (efecto lluvia lenta)
            for (let i = 0; i < 15; i++) {
                let star = document.createElement('div');
                star.className = 'estrella-viajera';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = '100%';
                star.style.height = (Math.random() * 50 + 50) + 'px';
                star.style.opacity = Math.random() * 0.5 + 0.2;
                star.style.animationDuration = (Math.random() * 10 + 10) + 's';
                container.appendChild(star);
            }

            // 3. Estrella fugaz ocasional
            setInterval(() => {
                let shootingStar = document.createElement('div');
                shootingStar.className = 'estrella-fugaz';
                shootingStar.style.top = Math.random() * 60 + '%';
                shootingStar.style.left = Math.random() * 40 + 60 + '%';
                container.appendChild(shootingStar);
                setTimeout(() => shootingStar.remove(), 3000);
            }, 3500);
        }
    </script>
</body>
</html>
