<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Tiziana ❤️</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- [ESTRUCTURA BASE] --- */
        body {
            background: linear-gradient(135deg, #ffe0e6 0%, #fff0f5 100%);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            position: relative;
        }

        /* --- [1. LA CAJA DE REGALO] --- */
        #pantalla-inicio {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: #ffe0e6;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 1s ease;
        }
        .box-container { position: relative; width: 100px; height: 100px; cursor: pointer; transition: transform 0.3s; }
        .box-body { position: absolute; bottom: 0; width: 100%; height: 80%; background-color: #ff3366; border-radius: 0 0 10px 10px; }
        .box-lid { position: absolute; top: 0; width: 110%; height: 25%; background-color: #e60039; left: -5%; border-radius: 5px; z-index: 2; transition: 0.5s; }
        .box-bow { position: absolute; top: -20%; left: 50%; transform: translateX(-50%); width: 40px; height: 20px; background-color: #fff; border-radius: 20px; z-index: 3; }
        .box-bow::before { content: ''; position: absolute; left: 50%; transform: translateX(-50%); width: 10px; height: 120px; background-color: #fff; }

        @keyframes shakeBox {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(8deg); }
            50% { transform: rotate(-8deg); }
            75% { transform: rotate(8deg); }
        }
        .sacudir { animation: shakeBox 0.4s ease-in-out; }
        .box-open .box-lid { transform: translateY(-80px) rotate(15deg); opacity: 0; }

        /* --- [2. CARTAS Y SECCIONES] --- */
        .seccion-carta {
            display: none;
            position: absolute;
            width: 100%;
            height: 100%;
            flex-direction: column;
            justify-content: flex-start; /* Cambio de center a flex-start para mejor scroll */
            align-items: center;
            z-index: 10;
            padding: 20px 0;
            overflow-y: auto; /* Permite scroll en toda la sección */
        }

        .card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px 25px;
            box-shadow: 0 20px 50px rgba(255, 51, 102, 0.25);
            text-align: center;
            border: 2px solid #ffccd5;
            animation: subirFade 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            max-width: 360px;
            width: 85%;
            margin-bottom: 30px;
            flex-shrink: 0; /* Evita que la carta se aplaste */
        }

        /* --- [3. FOTO POLAROID AJUSTADA] --- */
        .foto-externa {
            background: white;
            padding: 12px 12px 40px 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transform: rotate(-3deg);
            width: 250px;
            position: relative;
            z-index: 20;
            animation: caerFoto 1.2s ease-out forwards;
            margin-top: 10px; /* Margen para que no toque el borde superior */
            margin-bottom: 20px;
            border: 1px solid #eee;
            flex-shrink: 0;
        }
        
        .foto-externa img {
            width: 100%;
            height: auto;
            display: block;
            border: 1px solid #f9f9f9;
        }

        .nota {
            position: absolute;
            width: 90px;
            padding: 6px;
            font-family: 'Dancing Script', cursive;
            font-size: 1rem;
            color: #444;
            box-shadow: 2px 5px 10px rgba(0,0,0,0.1);
            text-align: center;
            font-weight: bold;
        }
        .nota-1 { top: -10px; left: -20px; transform: rotate(-12deg); background: #ffffff; border: 2px solid #ff3366; }
        .nota-2 { bottom: 10px; right: -25px; transform: rotate(8deg); background: #fff9c4; border: 1px solid #fbc02d; }

        @keyframes subirFade { from { opacity: 0; transform: translateY(40px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes caerFoto { from { opacity: 0; transform: translateY(-70px) rotate(5deg); } to { opacity: 1; transform: translateY(0) rotate(-3deg); } }

        h1 { color: #d81b60; font-family: 'Dancing Script', cursive; font-size: 2.5rem; margin: 0 0 10px 0; }
        h2 { color: #ad1457; font-size: 1.2rem; margin-top: 0; font-weight: 600; }
        p { color: #4a0016; font-size: 0.95rem; line-height: 1.6; margin-bottom: 15px; }

        button {
            background: linear-gradient(45deg, #ff3366, #ff6b8f);
            color: white; border: none; padding: 12px 30px;
            border-radius: 50px; font-size: 0.9rem; font-weight: 600;
            cursor: pointer; box-shadow: 0 6px 20px rgba(255, 51, 102, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        button:hover { transform: translateY(-3px); }

        /* Estilo corazones/pétalos */
        .heart, .petal { position: absolute; opacity: 0; pointer-events: none; z-index: 5; }
        .heart { background: #ff0040; width: 15px; height: 15px; }
        .heart:before, .heart:after { content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%; background: #ff0040; }
        .heart:before { top: -50%; left: 0; }
        .heart:after { left: 50%; top: 0; }
        .petal { background: #ffffff; border-radius: 150% 0 150% 0; width: 15px; height: 15px; border: 1px solid #ffccd5; }

        @keyframes floatHigh {
            0% { transform: translateY(110vh) scale(0.6) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-50vh) scale(1.2) rotate(450deg); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="pantalla-inicio">
        <div class="box-container" onclick="abrirRegalo()">
            <div class="box-lid"></div>
            <div class="box-bow"></div>
            <div class="box-body"></div>
        </div>
        <p style="color: #ff3366; margin-top: 25px; font-weight: 700; font-size: 1.3rem; font-family: 'Dancing Script', cursive;">Para Tiziana...</p>
    </div>

    <div class="seccion-carta" id="paso1" style="justify-content: center;">
        <div class="card">
            <h1>¡Hola, Tiziana!</h1>
            <h2>Algo especial para ti ✨</h2>
            <p>He preparado este detalle porque hay cosas que las palabras a veces no alcanzan a decir.</p>
            <button id="btn-revelar" onclick="revelarMensaje()">Abrir carta</button>
            <div id="mensaje-secreto" style="display:none; margin: 15px 0; font-style: italic; color: #c2185b; border-left: 4px solid #ff3366; background: #fff0f3; padding: 10px; border-radius: 10px;">
                "Eres la persona que ilumina mis días. ¡Feliz San Valentín!"
            </div>
            <button class="btn-siguiente" style="display:none; background:white; color:#ff3366; border:2.3px solid #ff3366; margin-top: 10px;" id="btn-sig1" onclick="cambiarPaso(1, 2)">Siguiente ➡️</button>
        </div>
    </div>

    <div class="seccion-carta" id="paso2">
        <div class="foto-externa">
            <div class="nota nota-1">Gardenia</div>
            <img src="gardenia.jpg" alt="Gardenia Blanca">
            <div class="nota nota-2">Para Tiziana</div>
        </div>
        <div class="card" style="max-width: 420px;">
            <h2 style="font-family: 'Dancing Script', cursive; font-size: 1.8rem; margin-bottom: 20px;">Una flor blanca, como tu luz.</h2>
            <div style="text-align: left; font-size: 0.95rem; color: #4a0016;">
                <p>Tiziana, quiero dedicarte esto, aunque no creo poder darte unas flores; de verdad me hubiera encantado.</p>
                <p>Y el no poder hacerlo me hace sentir mal, puesto que tú te mereces lo mejor de lo mejor. En sí no es la flor como tal, sino el blanco. Por alguna extraña razón, el blanco me recuerda a ti.</p>
                <p>Cada vez que vea una flor blanca, siempre estarás ahí. Quizá por la pureza que vi en ti, por tu amabilidad y tu forma de ser, por tu luz. Me salvaste cuando naufragaba sin rumbo. En medio de la oscuridad apareciste tú en mi vida, tan brillante y radiante que solo podía seguirte, solo podía mirarte, solo podía sentirte a ti. Y poco a poco recuperé aquello que perdí: las ganas de vivir.</p>
                <p>Eres fuerte y madura. Quizá no siempre es lo que aparentas, pero me enseñaste cosas de ti, cosas que me hicieron quererte mucho más.</p>
                <p>Es verdad que no pareces ser mucho de palabras o de expresar sentimientos, pero de lo que estoy seguro es de que sí sientes, y del mismo modo todos necesitamos cariño y amor en nuestras vidas. Te admiro, te quiero, te adoro.</p>
                <p>Tu belleza es más de lo que unos simples ojos pueden apreciar. La gardenia es una flor que necesita mucho cuidado, y quizá no sea la que más te represente, pero es una flor que no se ve en todos lados. Es especial: una flor que no florece para cualquiera, y cuando lo hace… se nota.</p>
            </div>
            <button onclick="cambiarPaso(2, 3)" style="margin-top: 20px;">¿SEGUIMOS??</button>
        </div>
    </div>

    <div class="seccion-carta" id="paso3" style="justify-content: center;">
        <div class="card">
            <h1>Te quiero ❤️</h1>
            <p>Gracias por ser parte de mi historia. Espero que este pequeño detalle te haga sonreír hoy y siempre.</p>
            <button onclick="lluviaFinal()">¡Lluvia de amor!</button>
        </div>
    </div>

    <script>
        let clicsRegalo = 0;
        let heartsActive = false;

        function crearElemento(clase) {
            const el = document.createElement('div');
            el.className = clase;
            document.body.appendChild(el);
            const size = Math.random() * 15 + 15;
            el.style.width = size + 'px';
            el.style.height = size + 'px';
            el.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 3 + 4;
            el.style.animation = `floatHigh ${duration}s linear infinite`;
            setTimeout(() => el.remove(), duration * 1000);
        }

        function abrirRegalo() {
            const box = document.querySelector('.box-container');
            clicsRegalo++;
            box.classList.remove('sacudir');
            void box.offsetWidth; box.classList.add('sacudir');
            box.style.transform = `scale(${1 + (clicsRegalo * 0.2)})`;
            if (clicsRegalo >= 3) {
                box.classList.add('box-open');
                setTimeout(() => {
                    document.getElementById('pantalla-inicio').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('pantalla-inicio').style.display = 'none';
                        document.getElementById('paso1').style.display = 'flex';
                        iniciarEfectos();
                    }, 1000);
                }, 600);
            }
        }

        function iniciarEfectos() {
            if(heartsActive) return;
            heartsActive = true;
            setInterval(() => {
                crearElemento('heart');
                setTimeout(() => crearElemento('petal'), 200);
            }, 400);
        }

        function revelarMensaje() {
            document.getElementById('mensaje-secreto').style.display = 'block';
            document.getElementById('btn-revelar').style.display = 'none';
            document.getElementById('btn-sig1').style.display = 'inline-block';
        }

        function cambiarPaso(actual, siguiente) {
            document.getElementById(`paso${actual}`).style.display = 'none';
            document.getElementById(`paso${siguiente}`).style.display = 'flex';
            // Scroll al inicio cuando cambia de paso
            document.getElementById(`paso${siguiente}`).scrollTop = 0;
        }

        function lluviaFinal() {
            for(let i=0; i<50; i++) setTimeout(() => crearElemento(Math.random() > 0.5 ? 'heart' : 'petal'), i*60);
        }
    </script>
</body>
</html>
